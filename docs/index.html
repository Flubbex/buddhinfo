<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Basic Page Needs
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta charset="utf-8">
    <title>Buddhanet Books</title>
    <meta name="description" content="Books from Buddhanet">
    <meta name="author" content="Flubbex">

    <!-- Mobile Specific Metas
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Fonts
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link href="css/font_raleway.css" rel="stylesheet" type="text/css">

    <!-- Skeleton CSS
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/skeleton.css">

    <!-- Custom CSS
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="stylesheet" href="css/index.css">

    <!-- Favicon
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <link rel="icon" type="image/png" href="images/favicon.png">

    <!-- JavaScript
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
    <script type="text/javascript" src="js/index.js">   </script>

</head>

<body>
  <div id="header" class="row">
   <h3>BuddhaNet Books</h3>
   <input type="text" id="search" placeholder="Search.."/>
  </div>

  <div id="content">
     <img src="images/favicon.png" id="favicon"/>
    <div class="row" id="titlelist">
      <div class="linktab"
            v-for="category in titlelist"
            v-show="opencategory === category.name
                    || opencategory === null
                    || opencategory === 'all'">
          <h4 v-on:click="opencategory =
                          opencategory === null
                                    ? category.name
                                    : opentitle = null">
          {{category.name}}
          <span v-show="filter === null">
          ({{category.content.length}} titles)
          </span>
          <span v-show="filter !== null">
          ({{countEntries(category,filter)}} found)
          </span>
          </h4>
            <div class="linklist"
                 v-show="opencategory===category.name
                         || opencategory==='all' ">

              <button v-for="title in category.content"
                      v-on:click="opentitle =
                                   opentitle === null
                                    ? title
                                    : null"
                            v-show="opentitle===null
                                    && (filter === null || title
                                                           .name
                                                           .toUpperCase()
                                                           .includes(filter
                                                           .toUpperCase()))"
                             >
               {{title.name}}
               </button>
                <button v-on:click="opencategory = null;
                                  clearSearch();"
                      v-show="opentitle===null && filter===null"
                      style="background-color: black;color:white;">
                  Back
                </button>
            </div>
       </div>

       <div id="titleinfo" v-show="opentitle!==null">
          <h5>{{opentitle?opentitle.name:""}}</h5>
          <p class="titledescription">
            {{opentitle?opentitle.description:""}}
          </p>
          <button v-on:click="openInline(opentitle)">
          Open Inline
          </button>
          <button v-on:click="openDirect(opentitle)">
          Download Directly
          </button>
          <button v-on:click="openTab(opentitle)">
          Open in new Tab
          </button>
          <button v-on:click="saveTo(opentitle)">
          Save..
          </button>
          <button v-on:click="opentitle = null">
          Back
          </button>
        </div>
    </div>

    <div id="readercontainer" v-show="title!==null">
      <div id="readercontrols">
        <button v-on:click="setBookmark()">  Set Bookmark  </button>
        <button v-on:click="gotoBookmark()"> Goto bookmark </button>
        <button v-on:click="title=null">  Close            </button>
      </div>
      <iframe id="reader" v-bind:src="title?title.src:''"></iframe>
    </div>

    <div id="footer" class="row">
      All content owned by
      <a href="http://www.buddhanet.net">
      Buddhanet.net
      </a>
    </div>
  </div>
</body>

</html>
